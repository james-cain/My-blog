<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Design Patterns-设计模式 | Jamescain Blog</title>
    <meta name="description" content="A knowledge blog">
    <link rel="icon" href="/knowledge-note/favicon.ico">
    
    <link rel="preload" href="/knowledge-note/assets/css/0.styles.2a62c23f.css" as="style"><link rel="preload" href="/knowledge-note/assets/js/app.5911ee68.js" as="script"><link rel="preload" href="/knowledge-note/assets/js/15.dd234ab4.js" as="script"><link rel="prefetch" href="/knowledge-note/assets/js/10.c06c8013.js"><link rel="prefetch" href="/knowledge-note/assets/js/11.e009d5ba.js"><link rel="prefetch" href="/knowledge-note/assets/js/12.7bd7ec08.js"><link rel="prefetch" href="/knowledge-note/assets/js/13.f7dd9fff.js"><link rel="prefetch" href="/knowledge-note/assets/js/14.2a1937c1.js"><link rel="prefetch" href="/knowledge-note/assets/js/16.aa68018a.js"><link rel="prefetch" href="/knowledge-note/assets/js/17.450ded1b.js"><link rel="prefetch" href="/knowledge-note/assets/js/18.e5ab91c5.js"><link rel="prefetch" href="/knowledge-note/assets/js/19.828f0cfd.js"><link rel="prefetch" href="/knowledge-note/assets/js/2.5416267e.js"><link rel="prefetch" href="/knowledge-note/assets/js/20.1f74175f.js"><link rel="prefetch" href="/knowledge-note/assets/js/21.ecc13655.js"><link rel="prefetch" href="/knowledge-note/assets/js/22.25b8b23e.js"><link rel="prefetch" href="/knowledge-note/assets/js/23.da0530a5.js"><link rel="prefetch" href="/knowledge-note/assets/js/24.adf76fe9.js"><link rel="prefetch" href="/knowledge-note/assets/js/25.c0a039ad.js"><link rel="prefetch" href="/knowledge-note/assets/js/26.41bf7655.js"><link rel="prefetch" href="/knowledge-note/assets/js/27.8cb8f7aa.js"><link rel="prefetch" href="/knowledge-note/assets/js/28.3ece7860.js"><link rel="prefetch" href="/knowledge-note/assets/js/29.5b309485.js"><link rel="prefetch" href="/knowledge-note/assets/js/3.eba998b9.js"><link rel="prefetch" href="/knowledge-note/assets/js/30.9d5ec625.js"><link rel="prefetch" href="/knowledge-note/assets/js/31.8e9db55d.js"><link rel="prefetch" href="/knowledge-note/assets/js/32.130120c0.js"><link rel="prefetch" href="/knowledge-note/assets/js/33.d0be234c.js"><link rel="prefetch" href="/knowledge-note/assets/js/34.8e7b7627.js"><link rel="prefetch" href="/knowledge-note/assets/js/35.7fb44f32.js"><link rel="prefetch" href="/knowledge-note/assets/js/36.03fd684d.js"><link rel="prefetch" href="/knowledge-note/assets/js/37.0bb053eb.js"><link rel="prefetch" href="/knowledge-note/assets/js/38.3ed9aa63.js"><link rel="prefetch" href="/knowledge-note/assets/js/39.503b146a.js"><link rel="prefetch" href="/knowledge-note/assets/js/4.f9b24404.js"><link rel="prefetch" href="/knowledge-note/assets/js/40.79121f99.js"><link rel="prefetch" href="/knowledge-note/assets/js/41.443d405d.js"><link rel="prefetch" href="/knowledge-note/assets/js/42.14497441.js"><link rel="prefetch" href="/knowledge-note/assets/js/5.7fd892d4.js"><link rel="prefetch" href="/knowledge-note/assets/js/6.c5949721.js"><link rel="prefetch" href="/knowledge-note/assets/js/7.bd690ea3.js"><link rel="prefetch" href="/knowledge-note/assets/js/8.0d238870.js"><link rel="prefetch" href="/knowledge-note/assets/js/9.0baaa73c.js">
    <link rel="stylesheet" href="/knowledge-note/assets/css/0.styles.2a62c23f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knowledge-note/" class="home-link router-link-active"><!----> <span class="site-name">Jamescain Blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/knowledge-note/knowledge/" class="nav-link router-link-active">知识库</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://twitter.com/Jamescain_lll" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/james-cain/My-lab" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/knowledge-note/knowledge/" class="nav-link router-link-active">知识库</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://twitter.com/Jamescain_lll" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/james-cain/My-lab" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>基础</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/knowledge-note/knowledge/Damn-hole-of-html5.html" class="sidebar-link">html5</a></li><li><a href="/knowledge-note/knowledge/Damn-hole-of-CSS3.html" class="sidebar-link">CSS3</a></li><li><a href="/knowledge-note/knowledge/Damn-hole-of-javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/knowledge-note/knowledge/review-the-javascript.html" class="sidebar-link">ES6</a></li><li><a href="/knowledge-note/knowledge/Damn-hole-of-design-patterns.html" class="active sidebar-link">Design Patterns-设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge-note/knowledge/Damn-hole-of-design-patterns.html#设计模式类型" class="sidebar-link">设计模式类型</a></li></ul></li><li><a href="/knowledge-note/knowledge/Damn-hole-of-http.html" class="sidebar-link">http/http2/https</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>进阶</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/knowledge-note/knowledge/Damn-hole-of-webapi.html" class="sidebar-link">WebAPI</a></li><li><a href="/knowledge-note/knowledge/Damn-hole-of-Browser.html" class="sidebar-link">Browser</a></li><li><a href="/knowledge-note/knowledge/Damn-hole-of-google-devtools.html" class="sidebar-link">google devtools</a></li><li><a href="/knowledge-note/knowledge/Damn-hole-of-network.html" class="sidebar-link">网络</a></li><li><a href="/knowledge-note/knowledge/Damn-hole-of-safe-and-hacker.html" class="sidebar-link">网络安全</a></li><li><a href="/knowledge-note/knowledge/Damn-hole-of-javascript-algonithms.html" class="sidebar-link">JavaScript数据结构</a></li><li><a href="/knowledge-note/knowledge/Damn-hole-of-performance.html" class="sidebar-link">性能优化</a></li><li><a href="/knowledge-note/knowledge/parameters-of-package.html" class="sidebar-link">详解package.json</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>工具</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/knowledge-note/knowledge/Damn-hole-of-babel.html" class="sidebar-link">babel7</a></li><li><a href="/knowledge-note/knowledge/webpack-perf.html" class="sidebar-link">Webpack打包优化</a></li><li><a href="/knowledge-note/knowledge/webpack-source-learning.html" class="sidebar-link">webpack源码</a></li><li><a href="/knowledge-note/knowledge/how-to-use-npm-sonatype.html" class="sidebar-link">用sonatype3搭建npm私服</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>拓展</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/knowledge-note/knowledge/Damn-hole-of-pwa.html" class="sidebar-link">PWA</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>浏览器详解</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/knowledge-note/knowledge/Damn-hole-of-chromium.html" class="sidebar-link">Chromium</a></li><li><a href="/knowledge-note/knowledge/Damn-hole-of-V8.html" class="sidebar-link">V8</a></li><li><a href="/knowledge-note/knowledge/Damn-hole-of-blink.html" class="sidebar-link">Blink</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/knowledge-note/knowledge/server-record.html" class="sidebar-link">部署一台属于自己的服务器</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="design-patterns-设计模式"><a href="#design-patterns-设计模式" aria-hidden="true" class="header-anchor">#</a> Design Patterns-设计模式</h1> <blockquote><p>该部分的内容翻译自<a href="https://github.com/kamranahmedse/design-patterns-for-humans#creational-design-patterns" target="_blank" rel="noopener noreferrer">design-patterns-for-humans<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，其中代码实现由php改为typescript编写，具体代码可以看<a href="https://github.com/james-cain/knowledge-works/tree/master/design-patterns" target="_blank" rel="noopener noreferrer">knowledge-works<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>设计模式是为了解决反复出现的问题而存在的，是作为如何解决确定问题的指导方针。它们并不是像传统的工具库那样直接引入到引用就会有神奇的事情发生。只是作为解决问题的一种合理方案。</p> <blockquote><p>在维基百科中是这么描述的：软件工程中，软件设计模式是在给定的软件设计上下文里，对于普遍出现的问题的一个可重用的解决方案。它并不是转换准确源码或者机器语言的最终设计。它只是作为一个如何解决被使用在不同情况中问题的描述或模板。</p></blockquote> <h2 id="设计模式类型"><a href="#设计模式类型" aria-hidden="true" class="header-anchor">#</a> 设计模式类型</h2> <ul><li><p>Creational Design Patterns</p> <blockquote><p>创建模式专注于如何初始化对象或相关联对象组</p></blockquote> <ul><li><p>Simple Factory - 简单工厂</p> <blockquote><p>简单工厂就是为使用者生成一个不暴露任何创建逻辑的实例</p></blockquote> <p>维基百科：</p> <blockquote><p>在面向对象编程中(OOP)，工厂即一个创建别的对象的对象 - 工厂通常是一个返回对象或class的函数或方法，被定义为&quot;new&quot;</p></blockquote> <p>何时使用？</p> <p>当需要创建对象会包含一些逻辑时，把这些重复的代码由专用的工厂代替会变得很有意义</p> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Door</span> <span class="token punctuation">{</span>
  <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">WoodenDoor</span> <span class="token keyword">implements</span> <span class="token class-name">Door</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> width<span class="token punctuation">;</span>
  <span class="token keyword">protected</span> height<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">width<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">DoorFactory</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token parameter">width<span class="token punctuation">,</span> height</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WoodenDoor</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> door <span class="token operator">=</span> DoorFactory<span class="token punctuation">.</span><span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
door<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>
door<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 200</span>
</code></pre></div></li> <li><p>Factory Method - 工厂方法</p> <blockquote><p>工厂方法提供了一个委派实例逻辑给child classes的方式</p></blockquote> <p>维基百科：</p> <blockquote><p>工厂方法模式是使用一些工厂方法来处理创建对象问题，没有指定准确的需要被创建的类。创建对象通过调用工厂方法(指定接口由child类实现或实现一个基础类通过派生类选择性的覆盖)来完成，而不是直接调用构造函数</p></blockquote> <p>何时使用？</p> <p>在类中，存在通用的处理且必要的子类是在运行时动态决定情况下很有用。或者换句话说，使用者不知道子类如何准确的执行时。</p> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Interviewer</span> <span class="token punctuation">{</span>
  <span class="token function">askQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Developer</span> <span class="token keyword">implements</span> <span class="token class-name">Interviewer</span> <span class="token punctuation">{</span>
  <span class="token function">askQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Asking about design patterns!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">CommunityExecutive</span> <span class="token keyword">implements</span> <span class="token class-name">Interviewer</span> <span class="token punctuation">{</span>
  <span class="token function">askQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Asking about community building!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">HiringManager</span> <span class="token punctuation">{</span>
  interviewer<span class="token punctuation">;</span>

  <span class="token comment">// Factory method</span>
  <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token function">makeInterviewer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Interviewer<span class="token punctuation">;</span>

  <span class="token function">takeInterview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>interviewer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">makeInterviewer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>interviewer<span class="token punctuation">.</span><span class="token function">askQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">DevelopmentManager</span> <span class="token keyword">extends</span> <span class="token class-name">HiringManager</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> <span class="token function">makeInterviewer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Interviewer <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Developer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MarketingManager</span> <span class="token keyword">extends</span> <span class="token class-name">HiringManager</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> <span class="token function">makeInterviewer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Interviewer <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommunityExecutive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> devManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DevelopmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
devManager<span class="token punctuation">.</span><span class="token function">takeInterview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Asking about design patterns!</span>

<span class="token keyword">let</span> marketingManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MarketingManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
marketingManager<span class="token punctuation">.</span><span class="token function">takeInterview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Asking about community building!</span>
</code></pre></div></li> <li><p>Abstract Factory - 抽象工厂</p> <blockquote><p>抽象工厂即工厂的工厂；将独立的但相关/依赖的工厂分组在一起，不指定其具体类的工厂的工厂</p></blockquote> <p>维基百科：</p> <blockquote><p>抽象工厂模式提供一个方式-封装独立的带有通用主题不指定具体类的工厂分组</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// Door interface and implements for it</span>
<span class="token keyword">interface</span> <span class="token class-name">Door</span> <span class="token punctuation">{</span>
  <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">WoodenDoor</span> <span class="token keyword">implements</span> <span class="token class-name">Door</span> <span class="token punctuation">{</span>
  <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am a wooden door'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">IronDoor</span> <span class="token keyword">implements</span> <span class="token class-name">Door</span> <span class="token punctuation">{</span>
  <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am an iron door'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// fitting experts for each door type</span>
<span class="token keyword">interface</span> <span class="token class-name">DoorFittingExpert</span> <span class="token punctuation">{</span>
  <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Welder</span> <span class="token keyword">implements</span> <span class="token class-name">DoorFittingExpert</span> <span class="token punctuation">{</span>
  <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I can only fit iron doors'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Carpenter</span> <span class="token keyword">implements</span> <span class="token class-name">DoorFittingExpert</span> <span class="token punctuation">{</span>
  <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I can only fit wooden doors'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// abstract factory</span>
<span class="token keyword">interface</span> <span class="token class-name">DoorFactory</span> <span class="token punctuation">{</span>
  <span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Door<span class="token punctuation">;</span>
  <span class="token function">mekeFittingExpert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DoorFittingExpert<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">WoodenDoorFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DoorFactory</span> <span class="token punctuation">{</span>
  <span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Door <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WoodenDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token function">mekeFittingExpert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DoorFittingExpert <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Carpenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">IronDoorFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DoorFactory</span> <span class="token punctuation">{</span>
  <span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Door <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">IronDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">mekeFittingExpert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> DoorFittingExpert <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Welder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> woodenFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WoodenDoorFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> door <span class="token operator">=</span> woodenFactory<span class="token punctuation">.</span><span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> expert <span class="token operator">=</span> woodenFactory<span class="token punctuation">.</span><span class="token function">mekeFittingExpert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
door<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// I am a wooden door</span>
expert<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// I can only fit wooden doors</span>

<span class="token keyword">let</span> ironFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IronDoorFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> ironDoor <span class="token operator">=</span> ironFactory<span class="token punctuation">.</span><span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> ironExpert <span class="token operator">=</span> ironFactory<span class="token punctuation">.</span><span class="token function">mekeFittingExpert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ironDoor<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// I am an iron door</span>
ironExpert<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// I can only fit iron doors</span>
</code></pre></div></li> <li><p>Builder - 生成器</p> <blockquote><p>允许创建不同风格的对象，同时避免构造函数污染。当一个对象可以有多种风格时，该模式将很有用，或在创建对象时涉及很多步骤</p></blockquote> <p>维基百科：</p> <blockquote><p>生成器模式是一种对象创建软件涉及模式，其目的是找到可伸缩构造函数反模式的解决方案</p></blockquote> <p>何时使用？</p> <p>当对象带有多种风格且阻止构造函数参数叠加。生成器模式和工厂模式不同的关键点在于工厂模式创建过程只有一步，而生成器模式由多步完成</p> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Burger</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> size<span class="token punctuation">;</span>
  <span class="token keyword">protected</span> cheese <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">protected</span> pepperoni <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">protected</span> lettuce <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">protected</span> tomato <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">builder<span class="token punctuation">:</span> BurgerBuilder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> builder<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cheese <span class="token operator">=</span> builder<span class="token punctuation">.</span>cheese<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pepperoni <span class="token operator">=</span> builder<span class="token punctuation">.</span>pepperoni<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>lettuce <span class="token operator">=</span> builder<span class="token punctuation">.</span>lettuce<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tomato <span class="token operator">=</span> builder<span class="token punctuation">.</span>tomato<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`size: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    cheese: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>cheese<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    pepperoni: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>pepperoni<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    lettuce: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lettuce<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    tomato: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>tomato<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">BurgerBuilder</span> <span class="token punctuation">{</span>
  size<span class="token punctuation">;</span>
  cheese <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  pepperoni <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  lettuce <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  tomato <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">size<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">addPepperoni</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pepperoni <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">addLettuce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>lettuce <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">addCheese</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cheese <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">addTomato</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tomato <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Burger <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Burger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> burger <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BurgerBuilder</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addPepperoni</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addLettuce</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addTomato</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

burger<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// size: 14</span>
<span class="token comment">// cheese: false</span>
<span class="token comment">// pepperoni: true</span>
<span class="token comment">// lettuce: true</span>
<span class="token comment">// tomato: true</span>
</code></pre></div></li> <li><p>Prototype - 原型模式</p> <blockquote><p>通过克隆的方式以已经存在的对象为基础创建对象</p></blockquote> <p>维基百科：</p> <blockquote><p>原型模式是一种软件开发生成器模式。当要创建的对象类型由一个原型实例决定时，将使用它，该原型实例被克隆以生成新的对象</p></blockquote> <p>JavaScript就是基于原型的模式创建对象，拷贝也分为两种，深拷贝和浅拷贝。若要拷贝一个完全独立内存的对象，必须使用深拷贝</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">deepClone</span> <span class="token operator">=</span> <span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> clone <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>
    <span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>clone<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>length <span class="token operator">?</span>
    <span class="token punctuation">(</span>clone<span class="token punctuation">.</span>length <span class="token operator">=</span> obj<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span> <span class="token punctuation">:</span>
      Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">?</span>
        Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">:</span>
          clone<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> obj<span class="token punctuation">:</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { foo: 'bar', obj: { a: 1, b: 2 } }</span>
</code></pre></div></li> <li><p>Singleton - 单例模式</p> <blockquote><p>确保类只有一个实例被创建</p></blockquote> <p>维基百科：</p> <blockquote><p>在软件工程，单例模式限制类的实例化。对于需要在系统中保持行为一致性的对象来说是很有用的</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">President</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> instance<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Hide the constructor</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> President <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>President<span class="token punctuation">.</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      President<span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">President</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> President<span class="token punctuation">.</span>instance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> president1 <span class="token operator">=</span> President<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> president2 <span class="token operator">=</span> President<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>president1 <span class="token operator">===</span> president2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div></li></ul></li> <li><p>Structural Design Patterns</p> <blockquote><p>结构模式最关注的是对象组成或理解为一个整体是如何通过每一个构建组成的</p></blockquote> <p>维基百科：</p> <blockquote><p>在软件工程中，结构设计模式是通过识别一种实现实体之间关系的简单方法来简化设计的设计模式</p></blockquote> <ul><li><p>Adapter - 适配器</p> <blockquote><p>适配器模式让使用者将原来不兼容的对象包装在适配器中，使其与另一个类兼容</p></blockquote> <p>维基百科：</p> <blockquote><p>在软件工程中，适配器模式是一种软件设计模式，它允许将现有类的接口用作另一个接口。它通常用于使现有类在不修改源代码的情况下与其他类一起工作</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Lion</span> <span class="token punctuation">{</span>
  <span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AfricanLion</span> <span class="token keyword">implements</span> <span class="token class-name">Lion</span> <span class="token punctuation">{</span>
  <span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AsianLion</span> <span class="token keyword">implements</span> <span class="token class-name">Lion</span> <span class="token punctuation">{</span>
  <span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Hunter</span> <span class="token punctuation">{</span>
  <span class="token function">hunt</span><span class="token punctuation">(</span><span class="token parameter">lion<span class="token punctuation">:</span> Lion</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    lion<span class="token punctuation">.</span><span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 在现有的基础上，添加WildDog类，但dog准确上说是属于不同的接口</span>
<span class="token comment">// 为了适配现有的hunter，要创建一个适配器来兼容</span>
<span class="token keyword">class</span> <span class="token class-name">WildDog</span> <span class="token punctuation">{</span>
  <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bark~'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 适配WildDog让其兼容</span>
<span class="token keyword">class</span> <span class="token class-name">WildDogAdapter</span> <span class="token keyword">implements</span> <span class="token class-name">Lion</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> dog<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">dog<span class="token punctuation">:</span> WildDog</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dog <span class="token operator">=</span> dog<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 现在WildDog就可以使用WildDogAdapter类适配规则</span>
<span class="token keyword">let</span> wildDog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WildDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> wildDogAdapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WildDogAdapter</span><span class="token punctuation">(</span>wildDog<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> hunter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hunter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hunter<span class="token punctuation">.</span><span class="token function">hunt</span><span class="token punctuation">(</span>wildDogAdapter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bark~</span>
</code></pre></div></li> <li><p>Bridge - 桥接</p> <blockquote><p>桥接模式是关于优先选择组合而不是继承。实现细节从一个层次结构推送到另一个具有独立层次结构的对象</p></blockquote> <p>维基百科：</p> <blockquote><p>桥接模式是软件工程中使用的一种设计模式，其目的是&quot;将抽象与其实现解耦，以便两者可以独立地变化&quot;</p></blockquote> <p><img src="http://reyshieh.com/assets/bridge_pattern.png" alt="bridge_pattern.png"></p> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">WebPage</span> <span class="token punctuation">{</span>
  <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">About</span> <span class="token keyword">implements</span> <span class="token class-name">WebPage</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> theme<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">theme<span class="token punctuation">:</span> Theme</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>theme <span class="token operator">=</span> theme<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`About page in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>theme<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Careers</span> <span class="token keyword">implements</span> <span class="token class-name">WebPage</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> theme<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">theme<span class="token punctuation">:</span> Theme</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>theme <span class="token operator">=</span> theme<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`Careers page in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>theme<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 解耦后的theme层级</span>
<span class="token keyword">interface</span> <span class="token class-name">Theme</span> <span class="token punctuation">{</span>
  <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">DarkTheme</span> <span class="token keyword">implements</span> <span class="token class-name">Theme</span> <span class="token punctuation">{</span>
  <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'Dark Black'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">LightTheme</span> <span class="token keyword">implements</span> <span class="token class-name">Theme</span> <span class="token punctuation">{</span>
  <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'Off white'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AquaTheme</span> <span class="token keyword">implements</span> <span class="token class-name">Theme</span> <span class="token punctuation">{</span>
  <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'Lightblue'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> darkTheme <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DarkTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> about <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">About</span><span class="token punctuation">(</span>darkTheme<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> careers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Careers</span><span class="token punctuation">(</span>darkTheme<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>about<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// About page in Dark Black</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>careers<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Careers page in Dark Black</span>
</code></pre></div></li> <li><p>composite - 组成</p> <blockquote><p>组成模式允许用户以统一的方式处理各个对象</p></blockquote> <p>维基百科：</p> <blockquote><p>在软件工程中，组成模式是一个分区设计模式。组成模式描述了将以与对象的单个实例相同的方式处理一组对象。组合的目的是将对象&quot;组合&quot;到树结构中，以表示部分-整体层次结构。实现组合模式可以让客户机统一地处理单个对象和组合</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 该例实际和Bridge示例十分相似</span>
<span class="token keyword">interface</span> <span class="token class-name">EmployeeConstructor</span> <span class="token punctuation">{</span>
  <span class="token keyword">new</span> <span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> salary<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Employee<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function">setSalary</span><span class="token punctuation">(</span>salary<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">getRoles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">creatEmployee</span><span class="token punctuation">(</span><span class="token parameter">cEmp<span class="token punctuation">:</span> EmployeeConstructor<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> salary<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> Employee <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">cEmp</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Developer</span> <span class="token keyword">implements</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> salary<span class="token punctuation">;</span>
  <span class="token keyword">protected</span> name<span class="token punctuation">;</span>
  <span class="token keyword">protected</span> roles<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> salary<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token parameter">salary<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>salary<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getRoles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>roles<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Organization</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> employees<span class="token punctuation">:</span> Employee<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token function">addEmployee</span><span class="token punctuation">(</span><span class="token parameter">employee<span class="token punctuation">:</span> Employee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>employees<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getNetSalaries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> netSalary <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>employees<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">emp</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      netSalary <span class="token operator">+=</span> emp<span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> netSalary<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token function">creatEmployee</span><span class="token punctuation">(</span>Developer<span class="token punctuation">,</span> <span class="token string">'John Doe'</span><span class="token punctuation">,</span> <span class="token number">12000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> jane <span class="token operator">=</span> <span class="token function">creatEmployee</span><span class="token punctuation">(</span>Developer<span class="token punctuation">,</span> <span class="token string">'Jane Doe'</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> organization <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Organization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
organization<span class="token punctuation">.</span><span class="token function">addEmployee</span><span class="token punctuation">(</span>john<span class="token punctuation">)</span><span class="token punctuation">;</span>
organization<span class="token punctuation">.</span><span class="token function">addEmployee</span><span class="token punctuation">(</span>jane<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Net salaries: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>organization<span class="token punctuation">.</span><span class="token function">getNetSalaries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Net salaries: 27000</span>
</code></pre></div></li> <li><p>Decorator - 装饰者</p> <blockquote><p>装饰者模式让用户在运行时通过将对象包装在装饰类的对象中来动态地改变对象行为</p></blockquote> <p>维基百科：</p> <blockquote><p>在面向对象编程中，装饰者模式是一个设计模式，允许添加行为给一个独立对象，无论是静态或动态，不影响同类中别的对象行为</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Coffee</span> <span class="token punctuation">{</span>
  <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">SimpleCoffee</span> <span class="token keyword">implements</span> <span class="token class-name">Coffee</span> <span class="token punctuation">{</span>
  <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'Simple coffee'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 接下来添加decorators，允许按需修改属性</span>
<span class="token keyword">class</span> <span class="token class-name">MilkCoffee</span> <span class="token keyword">implements</span> <span class="token class-name">Coffee</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> coffee<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">coffee<span class="token punctuation">:</span> Coffee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>coffee <span class="token operator">=</span> coffee<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, milk`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">WhipCoffee</span> <span class="token keyword">implements</span> <span class="token class-name">Coffee</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> coffee<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">coffee<span class="token punctuation">:</span> Coffee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>coffee <span class="token operator">=</span> coffee<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, whip`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">VanillaCoffee</span> <span class="token keyword">implements</span> <span class="token class-name">Coffee</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> coffee<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">coffee<span class="token punctuation">:</span> Coffee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>coffee <span class="token operator">=</span> coffee<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, vanilla`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> someCoffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Simple coffee</span>

someCoffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MilkCoffee</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Simple coffee, milk</span>

someCoffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WhipCoffee</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 17</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Simple coffee, milk, whip</span>

someCoffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VanillaCoffee</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 20</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Simple coffee, milk, whip, vanilla</span>
</code></pre></div></li> <li><p>Facade - 外观</p> <blockquote><p>外观模式为复杂子系统提供简单的接口</p></blockquote> <p>维基百科：</p> <blockquote><p>外观是一个对象，它为更大的代码体，如类库，提供了一个简化的接口</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>
  <span class="token function">getElectricShock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Ouch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">makeSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Beep beep!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">showLoadingScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Loading..'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">bam</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Ready to be used!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">closeEverything</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Bup bup bup buzzzz!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">sooth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Zzzzz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">pullCurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Haaah'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// facade</span>
<span class="token keyword">class</span> <span class="token class-name">ComputerFacade</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> computer<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">computer<span class="token punctuation">:</span> Computer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>computer <span class="token operator">=</span> computer<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">getElectricShock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">makeSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">showLoadingScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">bam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">closeEverything</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">pullCurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">sooth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用facade</span>
<span class="token keyword">let</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComputerFacade</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
computer<span class="token punctuation">.</span><span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Ouch</span>
<span class="token comment">// Beep beep!</span>
<span class="token comment">// Loading..</span>
<span class="token comment">// Ready to be used!</span>
computer<span class="token punctuation">.</span><span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Bup bup bup buzzzz!</span>
<span class="token comment">// Haaah</span>
<span class="token comment">// Zzzzz</span>
</code></pre></div></li> <li><p>Flyweight - 享元</p> <blockquote><p>享元模式是一种软件开发中的设计模式，其主要解决的问题是通过类对象的共享，来避免大量创建拥有相同内容的对象的开销</p></blockquote> <p>维基百科：</p> <blockquote><p>在计算机编程中，享元是一个软件设计模式。享元是一个通过与其他类似对象共享尽可能多的数据来最小化内存使用的对象；当一个简单的重复表示将使用不可接受的内存量时，它是一种大量使用对象的方法</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">KarakTea</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token comment">// flyweight 用数组存储已经创建的对象，不过度创建</span>
<span class="token keyword">class</span> <span class="token class-name">TeaMaker</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> availableTea <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token function">make</span><span class="token punctuation">(</span><span class="token parameter">preference</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>availableTea<span class="token punctuation">[</span>preference<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>availableTea<span class="token punctuation">[</span>preference<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KarakTea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>availableTea<span class="token punctuation">[</span>preference<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">TeaShop</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> orders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">protected</span> teaMaker<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">teaMaker<span class="token punctuation">:</span> TeaMaker</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>teaMaker <span class="token operator">=</span> teaMaker<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">takeOrder</span><span class="token punctuation">(</span><span class="token parameter">teaType<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> table<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>orders<span class="token punctuation">[</span>table<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>teaMaker<span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span>teaType<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>orders<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">order<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Serving tea to table#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> teaMaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TeaMaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> shop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TeaShop</span><span class="token punctuation">(</span>teaMaker<span class="token punctuation">)</span><span class="token punctuation">;</span>

shop<span class="token punctuation">.</span><span class="token function">takeOrder</span><span class="token punctuation">(</span><span class="token string">'less sugar'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
shop<span class="token punctuation">.</span><span class="token function">takeOrder</span><span class="token punctuation">(</span><span class="token string">'more milk'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
shop<span class="token punctuation">.</span><span class="token function">takeOrder</span><span class="token punctuation">(</span><span class="token string">'without sugar'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

shop<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Serving tea to table#1</span>
<span class="token comment">// Serving tea to table#2</span>
<span class="token comment">// Serving tea to table#5</span>
</code></pre></div></li> <li><p>Proxy - 代理</p> <blockquote><p>使用代理模式，类表示另一个类的功能</p></blockquote> <p>维基百科：</p> <blockquote><p>代理，在其最一般的形式中，是一个类，它的功能是作为其他类的接口。代理是一个包装器或代理对象，客户机调用它来访问幕后的实际服务对象。代理的使用可以简单地转发到实际对象，也可以提供额外的逻辑。在代理中，可以提供额外的功能，例如，在实际对象上的操作是资源密集型操作时进行缓存，或者在调用实际对象上的操作之前检查先决条件。</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Door</span> <span class="token punctuation">{</span>
  <span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">LabDoor</span> <span class="token keyword">implements</span> <span class="token class-name">Door</span> <span class="token punctuation">{</span>
  <span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Opening lab door'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'closing the lab door'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 创建proxy</span>
<span class="token keyword">class</span> <span class="token class-name">SecureDoor</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> door<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">door<span class="token punctuation">:</span> Door</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>door <span class="token operator">=</span> door<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">open</span><span class="token punctuation">(</span><span class="token parameter">password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>door<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Big no ! It ain\'t possible.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token parameter">password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> password <span class="token operator">===</span> <span class="token string">'$ecr@t'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>door<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> door <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecureDoor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LabDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
door<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'invalid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Big no ! It ain't possible.</span>
door<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'$ecr@t'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Opening lab door</span>
door<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// closing the lab door</span>
</code></pre></div></li></ul></li> <li><p>Behavioral Design Patterns</p> <blockquote><p>行为设计模式关注于对象之间的责任分配。它们与结构化设计模式的不同之处在于，它们不仅要指定结构，还概述了它们之间的消息传递/通信模式。换句话说，它们帮助回答了&quot;如何在软件组件中运行行为？&quot;</p></blockquote> <p>维基百科：</p> <blockquote><p>在软件工程中，行为设计模式是识别对象之间的公共通信模式并实现这些模式的设计模式。通过这样做，这些模式增加了执行此通信的灵活性。</p></blockquote> <ul><li><p>Chain of Responsibility - 责任链</p> <blockquote><p>责任链模式有助于构建对象链。请求从一端进入，从一个对象进入另一个对象，直到找到合适的处理程序</p></blockquote> <p>维基百科：</p> <blockquote><p>在面向对象设计中，责任链模式是一种由命令对象源和一系列处理对象组成的设计模式。每个处理对象都包含定义它可以处理的命令对象类型的逻辑;其余的传递给链中的下一个处理对象。</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> successor<span class="token punctuation">;</span>
  <span class="token keyword">protected</span> balance<span class="token punctuation">;</span>

  <span class="token comment">// 设置责任链对象</span>
  <span class="token function">setNext</span><span class="token punctuation">(</span><span class="token parameter">account<span class="token punctuation">:</span> Account</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>successor <span class="token operator">=</span> account<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">pay</span><span class="token punctuation">(</span><span class="token parameter">amountToPay<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">canPay</span><span class="token punctuation">(</span>amountToPay<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Paid </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>amountToPay<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> by </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>successor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>successor<span class="token punctuation">.</span><span class="token function">pay</span><span class="token punctuation">(</span>amountToPay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'None of the accounts have enough balance'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">canPay</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">&gt;=</span> amount<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bank</span> <span class="token keyword">extends</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> balance<span class="token punctuation">;</span>
  name <span class="token operator">=</span> <span class="token string">'Bank'</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">balance<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Paypal</span> <span class="token keyword">extends</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> balance<span class="token punctuation">;</span>
  name <span class="token operator">=</span> <span class="token string">'Paypal'</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">balance<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bitcoin</span> <span class="token keyword">extends</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> balance<span class="token punctuation">;</span>
  name <span class="token operator">=</span> <span class="token string">'Bitcoin'</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">balance<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 自定义责任链，链式顺序为bank -&gt; paypal -&gt; bitcoin</span>
<span class="token keyword">let</span> bank <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bank</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> paypal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Paypal</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> bitcoin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bitcoin</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bank<span class="token punctuation">.</span><span class="token function">setNext</span><span class="token punctuation">(</span>paypal<span class="token punctuation">)</span><span class="token punctuation">;</span>
paypal<span class="token punctuation">.</span><span class="token function">setNext</span><span class="token punctuation">(</span>bitcoin<span class="token punctuation">)</span><span class="token punctuation">;</span>

bank<span class="token punctuation">.</span><span class="token function">pay</span><span class="token punctuation">(</span><span class="token number">218</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Paid 218 by Bitcoin</span>
</code></pre></div></li> <li><p>Command - 命令</p> <blockquote><p>命令模式允许在对象中封装操作，该模式背后的关键思想是提供将客户机与接收器解耦的方法</p></blockquote> <p>维基百科：</p> <blockquote><p>在面向对象编程中，命令模式是一种行为设计模式，在这种模式中，对象被用来封装执行某个操作或在稍后某个事件所需的所有信息。这些信息包括方法名、拥有方法的对象和方法参数的值</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// Receiver</span>
<span class="token keyword">class</span> <span class="token class-name">Bulb</span> <span class="token punctuation">{</span>
  <span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Bulb has been lit'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Darkness!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Command接口</span>
<span class="token keyword">interface</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>
  <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">redo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Command</span>
<span class="token keyword">class</span> <span class="token class-name">TurnOn</span> <span class="token keyword">implements</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> bulb<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">bulb<span class="token punctuation">:</span> Bulb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bulb <span class="token operator">=</span> bulb<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bulb<span class="token punctuation">.</span><span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bulb<span class="token punctuation">.</span><span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">redo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">TurnOff</span> <span class="token keyword">implements</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> bulb<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">bulb<span class="token punctuation">:</span> Bulb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bulb <span class="token operator">=</span> bulb<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bulb<span class="token punctuation">.</span><span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bulb<span class="token punctuation">.</span><span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">redo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Invoker</span>
<span class="token keyword">class</span> <span class="token class-name">RemoteControl</span> <span class="token punctuation">{</span>
  <span class="token function">submit</span><span class="token punctuation">(</span><span class="token parameter">command<span class="token punctuation">:</span> Command</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    command<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> bulb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bulb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> turnOn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TurnOn</span><span class="token punctuation">(</span>bulb<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> turnOff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TurnOff</span><span class="token punctuation">(</span>bulb<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> remote <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RemoteControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
remote<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>turnOn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Bulb has been lit</span>
remote<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>turnOff<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Darkness!</span>
</code></pre></div></li> <li><p>Iterator - 迭代器</p> <blockquote><p>迭代器模式提供一种访问对象元素而不暴露底层表示的方法</p></blockquote> <p>维基百科：</p> <blockquote><p>在面向对象编程中，迭代器模式是一种设计模式，其中迭代器用于遍历容器并访问容器的元素。迭代器模式将算法与容器解耦；在某些情况下，算法必须特定于容器，因此不能解耦</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>
</code></pre></div></li> <li><p>Mediator - 中介者</p> <blockquote><p>中介者模式增加了一个第三方对象(称为中介者)来控制两个对象(称为同事)之间的交互。它有助于减少相互通信的类之间的耦合。因为现在他们不需要知道彼此的实现</p></blockquote> <p>维基百科：</p> <blockquote><p>在软件工程中，中介者模式定义一个对象，该对象封装了一组对象的交互方式。这种模式被认为是一种行为模式，因为它可以改变程序的运行行为</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ChatRoomMediator</span> <span class="token punctuation">{</span>
  <span class="token function">showMessage</span><span class="token punctuation">(</span>user<span class="token punctuation">:</span> User<span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Mediator</span>
<span class="token keyword">class</span> <span class="token class-name">ChatRoom</span> <span class="token keyword">implements</span> <span class="token class-name">ChatRoomMediator</span> <span class="token punctuation">{</span>
  <span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token parameter">user<span class="token punctuation">:</span> User<span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> sender <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> [ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sender<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ]: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// colleagues</span>
<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> name<span class="token punctuation">;</span>
  <span class="token keyword">protected</span> chatMediator<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> chatMediator<span class="token punctuation">:</span> ChatRoomMediator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>chatMediator <span class="token operator">=</span> chatMediator<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">send</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>chatMediator<span class="token punctuation">.</span><span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> mediator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ChatRoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'John Doe'</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> jane <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'Jane Doe'</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>

john<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hi there!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Thu Feb 14 2019 10:05:25 GMT+0800 (CST) [ John Doe ]: Hi there!</span>
jane<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hey!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Thu Feb 14 2019 10:05:25 GMT+0800 (CST) [ Jane Doe ]: Hey!</span>
</code></pre></div></li> <li><p>Memento - 备忘录</p> <blockquote><p>备忘录模式是一种捕获和存储对象当前状态的方式，这种方式可以在以后以一种平稳的方式恢复</p></blockquote> <p>维基百科：</p> <blockquote><p>备忘录模式是一种软件设计模式，它提供存储对象先前的状态的能力(撤销通过回滚)</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// memento</span>
<span class="token keyword">class</span> <span class="token class-name">EditorMemento</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> content<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>content<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Editor</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> content <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>

  <span class="token keyword">type</span><span class="token punctuation">(</span><span class="token parameter">words</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> words<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>content<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">EditorMemento</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">restore</span><span class="token punctuation">(</span><span class="token parameter">memento<span class="token punctuation">:</span> EditorMemento</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> memento<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> editor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Editor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

editor<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span><span class="token string">'This is the first sentence.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editor<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span><span class="token string">'This is second.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> saved <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

editor<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span><span class="token string">'And this is third.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>editor<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// This is the first sentence. This is second. And this is third.</span>

editor<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span>saved<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>editor<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  This is the first sentence. This is second.</span>
</code></pre></div></li> <li><p>Observer - 观察者</p> <blockquote><p>观察者模式是在对象之间定义依赖关系，以便每当对象更改其状态时，都会通知其所有依赖关系</p></blockquote> <p>维基百科：</p> <blockquote><p>观察者模式是一个软件设计模式，在这种模式中，一个名为分类(subject)的对象维护其依赖项(称为观察者observer)的列表，并自动通知它们任何状态更改，通常是通过调用它们的一个方法</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">JobPost</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> title<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// observer</span>
<span class="token keyword">class</span> <span class="token class-name">JobSeeker</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> name<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">onJobPosted</span><span class="token punctuation">(</span><span class="token parameter">job<span class="token punctuation">:</span> JobPost</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Hi </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">! New job posted: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>job<span class="token punctuation">.</span><span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">EmploymentAgency</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> observers<span class="token punctuation">:</span> JobSeeker<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token function">notify</span><span class="token punctuation">(</span><span class="token parameter">jobPosting<span class="token punctuation">:</span> JobPost</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">observer</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      observer<span class="token punctuation">.</span><span class="token function">onJobPosted</span><span class="token punctuation">(</span>jobPosting<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">attach</span><span class="token punctuation">(</span><span class="token parameter">observer<span class="token punctuation">:</span> JobSeeker</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">addJob</span><span class="token punctuation">(</span><span class="token parameter">jobPosting<span class="token punctuation">:</span> JobPost</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 每当得到Job信息，就通知observer</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span>jobPosting<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> johnDoe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JobSeeker</span><span class="token punctuation">(</span><span class="token string">'John Doe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> janeDoe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JobSeeker</span><span class="token punctuation">(</span><span class="token string">'Jane Doe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> jobPostings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmploymentAgency</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jobPostings<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>johnDoe<span class="token punctuation">)</span><span class="token punctuation">;</span>
jobPostings<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>janeDoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

jobPostings<span class="token punctuation">.</span><span class="token function">addJob</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JobPost</span><span class="token punctuation">(</span><span class="token string">'Software Engineer'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Hi John Doe! New job posted: Software Engineer</span>
<span class="token comment">// Hi Jane Doe! New job posted: Software Engineer</span>
</code></pre></div></li> <li><p>Visitor - 访问者</p> <blockquote><p>访问者模式允许使用者向对象添加进一步的操作，而不必修改它们</p></blockquote> <p>维基百科:</p> <blockquote><p>在面向对象编程和软件工程中，访问者设计模式是一种将算法从其操作的对象结构中分离出来的方法。这种分离的一个实际结果是能够在不修改对象结构的情况下向其添加新操作。这是遵循开放/封闭原则的一种方式</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// Visitee</span>
<span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">accept</span><span class="token punctuation">(</span>operation<span class="token punctuation">:</span> AnimalOperation<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Visitor</span>
<span class="token keyword">interface</span> <span class="token class-name">AnimalOperation</span> <span class="token punctuation">{</span>
  <span class="token function">visitMonkey</span><span class="token punctuation">(</span>monkey<span class="token punctuation">:</span> Monkey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">visitLion</span><span class="token punctuation">(</span>lion<span class="token punctuation">:</span> Lion<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">visitDolphin</span><span class="token punctuation">(</span>dolphin<span class="token punctuation">:</span> Dolphin<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Monkey</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Ooh oo aa aa !'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">accept</span><span class="token punctuation">(</span><span class="token parameter">operation<span class="token punctuation">:</span> AnimalOperation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    operation<span class="token punctuation">.</span><span class="token function">visitMonkey</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Lion</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Roaaar!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">accept</span><span class="token punctuation">(</span><span class="token parameter">operation<span class="token punctuation">:</span> AnimalOperation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    operation<span class="token punctuation">.</span><span class="token function">visitLion</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dolphin</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Tuut tuttu tuutt!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">accept</span><span class="token punctuation">(</span><span class="token parameter">operation<span class="token punctuation">:</span> AnimalOperation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    operation<span class="token punctuation">.</span><span class="token function">visitDolphin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 实现Visitor</span>
<span class="token keyword">class</span> <span class="token class-name">Speak</span> <span class="token keyword">implements</span> <span class="token class-name">AnimalOperation</span> <span class="token punctuation">{</span>
  <span class="token function">visitMonkey</span><span class="token punctuation">(</span><span class="token parameter">monkey<span class="token punctuation">:</span> Monkey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    monkey<span class="token punctuation">.</span><span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">visitLion</span><span class="token punctuation">(</span><span class="token parameter">lion<span class="token punctuation">:</span> Lion</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    lion<span class="token punctuation">.</span><span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">visitDolphin</span><span class="token punctuation">(</span><span class="token parameter">dolphin<span class="token punctuation">:</span> Dolphin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dolphin<span class="token punctuation">.</span><span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> monkey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Monkey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> lion <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> dolphin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dolphin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> speak <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

monkey<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Ooh oo aa aa !</span>
lion<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Roaaar!</span>
dolphin<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Tuut tuttu tuutt!</span>

<span class="token comment">// 现在我们可以在已有的基础上添加action，例如我们想知道每个动物的调高情况</span>
<span class="token comment">// 可以添加一个Jump类</span>
<span class="token keyword">class</span> <span class="token class-name">Jump</span> <span class="token keyword">implements</span> <span class="token class-name">AnimalOperation</span> <span class="token punctuation">{</span>
  <span class="token function">visitMonkey</span><span class="token punctuation">(</span><span class="token parameter">monkey<span class="token punctuation">:</span> Monkey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Jumped 20 feet high! on to the tree!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">visitLion</span><span class="token punctuation">(</span><span class="token parameter">lion<span class="token punctuation">:</span> Lion</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Jumped 7 feet! Back on the ground'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">visitDolphin</span><span class="token punctuation">(</span><span class="token parameter">dolphin<span class="token punctuation">:</span> Dolphin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Walked on water a little and disappeared'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> jump <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

monkey<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>jump<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Jumped 20 feet high! on to the tree!</span>
lion<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>jump<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Jumped 7 feet! Back on the ground</span>
dolphin<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>jump<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Walked on water a little and disappeared</span>
</code></pre></div></li> <li><p>Strategy - 策略</p> <blockquote><p>策略模式允许使用者根据不同的情况切换算法或策略</p></blockquote> <p>维基百科：</p> <blockquote><p>在计算机编程中，策略模式是一种行为软件设计模式，它允许在运行时选择算法的行为</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">SortStrategy</span> <span class="token punctuation">{</span>
  <span class="token function">sort</span><span class="token punctuation">(</span>dataset<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">BubbleSortStrategy</span> <span class="token keyword">implements</span> <span class="token class-name">SortStrategy</span> <span class="token punctuation">{</span>
  <span class="token function">sort</span><span class="token punctuation">(</span>dataset<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Sorting using bubble sort'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dataset<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">QuickSortStrategy</span> <span class="token keyword">implements</span> <span class="token class-name">SortStrategy</span> <span class="token punctuation">{</span>
  <span class="token function">sort</span><span class="token punctuation">(</span>dataset<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Sorting using quick sort'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dataset<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Sorter</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> sorter<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">sorter<span class="token punctuation">:</span> SortStrategy</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>sorter <span class="token operator">=</span> sorter<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">sort</span><span class="token punctuation">(</span>dataset<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sorter<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> dataset <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> sorter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sorter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BubbleSortStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sorter<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Sorting using bubble sort</span>

sorter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sorter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">QuickSortStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sorter<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Sorting using quick sort</span>
</code></pre></div></li> <li><p>State - 状态</p> <blockquote><p>当状态改变时，状态模式允许使用者转换类的行为</p></blockquote> <p>维基百科:</p> <blockquote><p>状态模式是一种以面向对象的方式实现状态机的行为软件设计模式。对于状态模式，通过将每个单独的状态实现为状态模式接口的派生类，并通过调用模式超类定义的方法实现状态转换，从而实现状态机。状态模式可以解释为策略模式，它能够通过调用模式接口中定义的方法来切换当前策略。</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 个人觉得状态模式和策略模式相似</span>
<span class="token keyword">interface</span> <span class="token class-name">WritingState</span> <span class="token punctuation">{</span>
  <span class="token function">write</span><span class="token punctuation">(</span>words<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// state</span>
<span class="token keyword">class</span> <span class="token class-name">UpperCase</span> <span class="token keyword">implements</span> <span class="token class-name">WritingState</span> <span class="token punctuation">{</span>
  <span class="token function">write</span><span class="token punctuation">(</span><span class="token parameter">words<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>words<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">LowerCase</span> <span class="token keyword">implements</span> <span class="token class-name">WritingState</span> <span class="token punctuation">{</span>
  <span class="token function">write</span><span class="token punctuation">(</span><span class="token parameter">words<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>words<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">DefaultText</span> <span class="token keyword">implements</span> <span class="token class-name">WritingState</span> <span class="token punctuation">{</span>
  <span class="token function">write</span><span class="token punctuation">(</span><span class="token parameter">words<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">TextEditor</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> state<span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">:</span> WritingState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">:</span> WritingState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">type</span><span class="token punctuation">(</span><span class="token parameter">words<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> editor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextEditor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DefaultText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editor<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span><span class="token string">'First line'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// First line</span>

editor<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editor<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span><span class="token string">'Second line'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// SECOND LINE</span>
editor<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span><span class="token string">'Third line'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// THIRD LINE</span>

editor<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editor<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span><span class="token string">'Forth line'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// forth line</span>
editor<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span><span class="token string">'Fifth line'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fifth line</span>
</code></pre></div></li> <li><p>Template Method - 模板方法</p> <blockquote><p>模板方法模式定义了如何执行某个算法的骨架，但将这些步骤的实现顺延到子类中</p></blockquote> <p>维基百科：</p> <blockquote><p>在软件工程中，模板方法模式是一个行为设计模式，它定义了操作中的算法程序骨架，将某些步骤顺延到子类中。它允许重新定义算法的某些步骤但不改变算法的框架</p></blockquote> <p>示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 指定build算法的框架基类</span>
<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
  <span class="token comment">// Template method</span>
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">lint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">assembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">abstract</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">abstract</span> <span class="token function">lint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">abstract</span> <span class="token function">assembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">abstract</span> <span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AndroidBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Running android tests'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">lint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Linting the android code'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">assembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Assemblying the android build'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Deploying android build to server'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">IosBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Running ios tests'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">lint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Linting the ios code'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">assembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Assemblying the ios build'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Deploying ios build to server'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> androidBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AndroidBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
androidBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Running android tests</span>
<span class="token comment">// Linting the android code</span>
<span class="token comment">// Assemblying the android build</span>
<span class="token comment">// Deploying android build to server</span>

<span class="token keyword">let</span> iosBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IosBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
iosBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Running ios tests</span>
<span class="token comment">// Linting the ios code</span>
<span class="token comment">// Assemblying the ios build</span>
<span class="token comment">// Deploying ios build to server</span>
</code></pre></div></li></ul></li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/knowledge-note/knowledge/review-the-javascript.html" class="prev">
          ES6
        </a></span> <span class="next"><a href="/knowledge-note/knowledge/Damn-hole-of-http.html">
          http/http2/https
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/knowledge-note/assets/js/app.5911ee68.js" defer></script><script src="/knowledge-note/assets/js/15.dd234ab4.js" defer></script>
  </body>
</html>
